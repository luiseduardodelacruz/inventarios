<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="/img/logo-navegador.png" type="Logo Pestaña">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/css/productos.css">
    <title>Rubert's Denim - Usuarios</title>
</head>
<body class="bg-[#ffe1d2]">

    <!-- Elemento Nav Bar -->
    <nav>
        <div class="grid grid-cols-2 bg-[#e2aa80] bg-opacity-45 w-full start-0 px-[10%] md:px-[5%] items-stretch h-[10vh] sm:h-[10vw] md:h-[9vw] lg:h-[8vw] xl:h-[7vw] 2xl:h-[6vw] rounded-b-full">
            <div class="grid-span-1 self-center justify-self-start">
                <a th:href="@{/inventario}">
                    <button type="button" class="flex items-center justify-center px-[4vw] sm:px-[3.5vw] md:px-[3vw] lg:px-[2.5vw] xl:px-[2vw] text-white bg-[#ff8a00] fuente_1 hover:bg-[#ff9b00] focus:ring-4 focus:outline-none focus:ring-[#ffac00] rounded-3xl text-xs sm:text-sm md:text-base lg:text-base xl:text-xl mr-[20%] sm:mr-[0%] py-2 sm:py-3 text-center">VER INVENTARIO 
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-[1.15vw] sm:ml-[0.85vw] xl:ml-[0.45vw] h-[19px] w-[19px] md:h-[18px] md:w-[18px] lg:h-[22px] lg:w-[22px]" viewBox="0 0 640 512"><path fill="white" d="M0 488V171.3c0-26.2 15.9-49.7 40.2-59.4L308.1 4.8c7.6-3.1 16.1-3.1 23.8 0L599.8 111.9c24.3 9.7 40.2 33.3 40.2 59.4V488c0 13.3-10.7 24-24 24H568c-13.3 0-24-10.7-24-24V224c0-17.7-14.3-32-32-32H128c-17.7 0-32 14.3-32 32V488c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24zm488 24l-336 0c-13.3 0-24-10.7-24-24V432H512l0 56c0 13.3-10.7 24-24 24zM128 400V336H512v64H128zm0-96V224H512l0 80H128z"/></svg>
                    </button>
                </a>
            </div>
            <div class="grid-span-1 self-center justify-self-end">
                <a th:href="@{/cerrar-sesion}">
                    <button type="button" class="flex items-center justify-center px-[4vw] sm:px-[3.5vw] md:px-[3vw] lg:px-[2.5vw] xl:px-[2vw] text-white bg-[#db4900] fuente_1 hover:bg-[#ff5500] focus:ring-4 focus:outline-none focus:ring-[#e8763d] rounded-3xl text-xs sm:text-sm md:text-base lg:text-base xl:text-xl ml-[15%] sm:ml-[0%] py-2 sm:py-3 text-center">CERRAR SESIÓN 
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-[1.15vw] sm:ml-[0.85vw] xl:ml-[0.45vw] h-[18px] w-[18px] md:h-[18px] md:w-[18px] lg:h-[20px] lg:w-[20px]" viewBox="0 0 512 512"><path fill="white" d="M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"/></svg>
                    </button>
                </a>
            </div>
        </div>
    </nav>
    
    <div class="grid grid-cols-1">
        <div class="col-span-1">

            <!-- Elemento Principal Usuarios -->
            <div class="flex flex-wrap justify-evenly">
                <div class="mb-2 mt-3 xl:mb-4 xl:mt-5 pt-[9vw] md:pt-[6vw] lg:pt-[5vw] w-[40vw] md:w-[28vw] lg:w-[22vw] xl:w-[22vw] 2xl:w-[18vw] mx-[1vw] my-[1vw]">
                    <div class="bg-[#e8763d] rounded-t-[45px]">
                        <div class="relative flex justify-center">
                            <div class="absolute flex justify-center w-full -top-[9vw] md:-top-[6vw] lg:-top-[5vw] h-[16vw] md:h-[10vw] lg:h-[8vw] rounded-3xl">
                                <img class="object-cover" src="/img/productos-subir-imagen.png" alt="Subir Producto">
                            </div>
                        </div>
                        <div class="p-[6%] pt-[9vw] md:pt-[5vw] lg:pt-[4vw]">
                            <div class="">
                                <p class="flex justify-center text-center fuente_4 text-base md:text-xl lg:text-xl xl:text-2xl text-white">Nuevo Producto</p>
                                <p class="flex justify-center text-center fuente_2 text-xs md:text-sm lg:text-sm xl:text-base text-white">Email</p>
                                <p class="flex justify-center text-center fuente_2 text-xs md:text-sm lg:text-sm xl:text-base text-white">Rol</p>
                            </div>
                            <div class="flex justify-center">
                                <button id="abrir_agregar_usuario" type="button" class="mt-2 px-[1.5vw] md:px-[1vw] text-white bg-[#db4900] fuente_1 hover:bg-[#ff5500] focus:ring-4 focus:outline-none focus:ring-[#da6930] rounded-3xl text-xs md:text-base lg:text-base xl:text-xl py-1 text-center">AGREGAR</button>
                            </div>
                        </div>
                    </div>
                </div>
        
                <div th:each="user : ${users}" class="mb-2 mt-3 xl:mb-4 xl:mt-5 pt-[9vw] md:pt-[6vw] lg:pt-[5vw] w-[40vw] md:w-[28vw] lg:w-[22vw] xl:w-[22vw] 2xl:w-[18vw] mx-[1vw] my-[1vw]">
                    <div class="bg-[#e8763d] rounded-t-[45px]">
                        <div class="relative flex justify-center">
                            <div class="absolute flex justify-center w-full -top-[9vw] md:-top-[6vw] lg:-top-[5vw] h-[16vw] md:h-[10vw] lg:h-[8vw] rounded-3xl">
                                <img class="object-cover rounded-t-[20px] md:rounded-t-[25px] lg:rounded-t-[35px]" th:src="${user.image != null} ? ${user.image} : '/img/producto-sin-imagen.png'" alt="Imagen del Usuario">
                            </div>
                        </div>
                        <div class="p-[6%] pt-[9vw] md:pt-[5vw] lg:pt-[4vw]">
                            <div class="">
                                <p th:text="${user.name}" class="capitalize flex justify-center text-center fuente_4 text-base md:text-xl lg:text-xl xl:text-2xl text-white"></p>   
                                <p class="text-center fuente_2 text-xs md:text-sm lg:text-sm xl:text-base text-white">Email: <span th:text="${user.email}" class="ml-1 md:ml-3 text-justify fuente_5 text-white"></span></p>                          
                                <p class="text-center fuente_2 text-xs md:text-sm lg:text-sm xl:text-base text-white">Rol: <span th:text="${user.role}" class="capitalize ml-1 md:ml-3 text-justify fuente_5 text-white"></span></p>           
                            </div>
                            <div class="flex justify-evenly mt-2">
                                <a th:href="@{'/usuarios/update/' + ${user.id}}">
                                    <button type="button" class="abrir_editar_usuario px-[1.5vw] md:px-[1vw] text-white bg-[#ff8a00] fuente_1 hover:bg-[#ff9b00] focus:ring-4 focus:outline-none focus:ring-[#ffac00] rounded-3xl text-xs md:text-base lg:text-base xl:text-xl py-1 text-center">EDITAR</button>
                                </a>
                                <button th:attr="onclick=|openModalUsuarioDelete('${user.id}', '${user.name}', '${user.image}')|" type="button" class="px-[1.5vw] md:px-[1vw] text-white bg-[#db4900] fuente_1 hover:bg-[#ff5500] focus:ring-4 focus:outline-none focus:ring-[#da6930] rounded-3xl text-xs md:text-base lg:text-base xl:text-xl py-1 text-center">ELIMINAR</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Elemento Modal Agregar Usuarios -->
            <div>
                <div id="agregar_usuario" class="fixed inset-0 z-50 hidden transition-transform duration-1000 ease-in-out flex items-center justify-center bg-gray-800 bg-opacity-50">
                    <div class="w-full max-w-[90vw] md:max-w-lg lg:max-w-lg xl:max-w-xl p-4 md:p-5 lg:p-5 xl:p-6 bg-[#faad86] rounded-[45px] shadow-lg">
                        <div class="grid grid-cols-12 start-0 flex items-stretch">
                        <p class="text-xl md:text-2xl lg:text-2xl xl:text-3xl fuente_4 text-white col-span-11 text-center place-self-center justify-self-center">¡ Nuevo Usuario !</p>
                        <button id="cerrar_agregar_usuario" type="button" class="inline-flex col-span-1 place-self-center justify-self-end text-white p-0.5 hover:bg-gray-600 hover:bg-opacity-10 rounded-xl"><svg class="w-9 h-9 md:w-10 md:h-10 lg:w-10 lg:h-10 xl:w-12 xl:h-12" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="9"/><path d="m14 10l-4 4m0-4l4 4"/></g></svg></button>
                        </div>
                        <form th:action="@{/usuarios/create}" th:object="${user}" method="post" enctype="multipart/form-data">
                            <div class="px-4 md:px-12 flex justify-center">
                                <div class="grid grid-cols-12 start-0 flex items-stretch mt-4 md:mt-4 lg:mt-4 xl:mt-5 px-4 w-full">
                                    <p class="col-span-5 text-center fuente_2 text-lg md:text-xl lg:text-xl xl:text-2xl text-white pr-6 place-self-center justify-self-end">Nombre:</p>
                                    <input type="text" id="name" th:field="*{name}" class="col-span-7 place-self-center justify-self-start fuente_3 bg-[#db4900] border border-[#db4900] text-white text-base md:text-base lg:text-base xl:text-lg rounded-3xl focus:ring-[#db4900] focus:border-[#db4900] block w-full p-1.5 px-2 md:p-2 md:px-3 lg:p-2 lg:px-3 xl:p-2 xl:px-3" required />
                                </div>
                            </div>
            
                            <div class="px-4 md:px-12 flex justify-center">
                                <div class="grid grid-cols-12 start-0 flex items-stretch mt-4 md:mt-4 lg:mt-4 xl:mt-5 px-4 w-full">
                                    <p class="col-span-5 text-center fuente_2 text-lg md:text-xl lg:text-xl xl:text-2xl text-white pr-6 place-self-center justify-self-end">Email:</p>
                                    <input type="email" id="email" th:field="*{email}" class="col-span-7 place-self-center justify-self-start fuente_3 bg-[#db4900] border border-[#db4900] text-white text-base md:text-base lg:text-base xl:text-lg rounded-3xl focus:ring-[#db4900] focus:border-[#db4900] block w-full p-1.5 px-2 md:p-2 md:px-3 lg:p-2 lg:px-3 xl:p-2 xl:px-3" required />
                                </div>
                            </div>
            
                            <div class="px-4 md:px-12 flex justify-center">
                                <div class="grid grid-cols-12 start-0 flex items-stretch mt-4 md:mt-4 lg:mt-4 xl:mt-5 px-4 w-full">
                                    <p class="col-span-5 text-center fuente_2 text-lg md:text-xl lg:text-xl xl:text-2xl text-white pr-6 place-self-center justify-self-end">Contraseña:</p>
                                    <input type="password" id="password" th:field="*{password}" class="col-span-7 place-self-center justify-self-start fuente_3 bg-[#db4900] border border-[#db4900] text-white text-base md:text-base lg:text-base xl:text-lg rounded-3xl focus:ring-[#db4900] focus:border-[#db4900] block w-full p-1.5 px-2 md:p-2 md:px-3 lg:p-2 lg:px-3 xl:p-2 xl:px-3" required />
                                </div>
                            </div>
            
                            <div class="px-4 md:px-12 flex justify-center">
                                <div class="grid grid-cols-12 start-0 flex items-stretch mt-4 md:mt-4 lg:mt-4 xl:mt-5 px-4 w-full">
                                    <p class="col-span-5 text-center fuente_2 text-lg md:text-xl lg:text-xl xl:text-2xl text-white pr-6 place-self-center justify-self-end">Imagen:</p>
                                    <div class="relative col-span-7 place-self-center justify-self-start fuente_3 w-full bg-[#db4900] border border-[#da6930] rounded-3xl focus:ring-transparent focus:border-transparent flex py-1 md:py-1.5 lg:py-1.5 xl:py-2 px-2 md:px-2 lg:px-2 xl:px-3">
                                        <div id="imagen-previa" class="w-7 h-7 flex-shrink-0 overflow-hidden rounded-md">
                                            <svg class="w-6 h-6 md:w-7 md:h-7 flex-shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><g fill="none">
                                                <path fill="white" d="M44 24C44 22.8954 43.1046 22 42 22C40.8954 22 40 22.8954 40 24H44ZM24 8C25.1046 8 26 7.10457 26 6C26 4.89543 25.1046 4 24 4V8ZM39 40H9V44H39V40ZM8 39V9H4V39H8ZM40 24V39H44V24H40ZM9 8H24V4H9V8ZM9 40C8.44772 40 8 39.5523 8 39H4C4 41.7614 6.23857 44 9 44V40ZM39 44C41.7614 44 44 41.7614 44 39H40C40 39.5523 39.5523 40 39 40V44ZM8 9C8 8.44772 8.44771 8 9 8V4C6.23858 4 4 6.23857 4 9H8Z"/><path stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 35L16.6931 25.198C17.4389 24.5143 18.5779 24.4953 19.3461 25.1538L32 36"/><path stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M28 31L32.7735 26.2265C33.4772 25.5228 34.5914 25.4436 35.3877 26.0408L42 31"/><path stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M37 18L37 6"/>
                                                <path stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M32 11L37 6L42 11"/></g>
                                            </svg>
                                        </div>
                                        <p id="nombre_archivo" class="block text-xs md:text-xs lg:text-xs xl:text-sm fuente_2 text-white pl-1 overflow-hidden place-self-center">Seleccione un Archivo</p>
                                        <input id="archivo" name="imageFile" type="file" onchange="validarTamanioImagen(this)" accept="image/jpeg, image/png"  class="absolute inset-0 opacity-0 cursor-pointer">
                                    </div>
                                </div>
                            </div>

                            <p class="justify-center text-center fuente_5"><span id="mensaje-error" class="text-red-500"></span></p>

                            <div class="flex justify-evenly mt-6 mb-3 lg:mb-4">
                                <button type="submit" class="place-self-center col-span-6 px-[1vw] text-white bg-[#fe7355] fuente_1 hover:bg-[#ff8268] focus:ring-4 focus:outline-none focus:ring-[#dc6750] rounded-3xl text-base md:text-lg lg:text-lg xl:text-xl py-1.5 md:py-1.5 lg:py-1.5 xl:py-2 w-[30%] text-center">Aceptar</button>
                                <button type="reset" onclick="closeModalUsuarioAdd()" class="place-self-center col-span-6 px-[1vw] text-white bg-[#db4900] fuente_1 hover:bg-[#d96328] focus:ring-4 focus:outline-none focus:ring-[#bd5F30] rounded-3xl text-base md:text-lg lg:text-lg xl:text-xl py-1.5 md:py-1.5 lg:py-1.5 xl:py-2 w-[30%] text-center">Cancelar</button>
                            </div>
                        </form>                            
                    </div>
                </div>
            </div>

            <!-- Elemento Modal Eliminar Usuarios -->
            <div>
                <div id="eliminar_usuario" class="fixed inset-0 z-50 hidden transition-transform duration-1000 ease-in-out flex items-center justify-center bg-gray-800 bg-opacity-50">
                    <div class="w-full max-w-[90vw] md:max-w-lg lg:max-w-lg xl:max-w-xl p-4 md:p-5 lg:p-5 xl:p-6 bg-[#faad86] rounded-[45px] shadow-lg">
                        <div class="grid grid-cols-12 start-0 flex items-stretch">
                            <p class="text-base md:text-2xl lg:text-2xl xl:text-3xl px-5 fuente_4 text-white col-span-11 text-center place-self-center justify-self-center">¿Está Seguro de Retirarle a <span id="name_user" class="capitalize">NAME</span> el Acceso?</p>
                            <button id="cerrar_eliminar_usuario" type="button" class="inline-flex col-span-1 place-self-center justify-self-end text-white p-0.5 hover:bg-gray-600 hover:bg-opacity-10 rounded-xl">
                                <svg class="w-9 h-9 md:w-10 md:h-10 lg:w-10 lg:h-10 xl:w-12 xl:h-12" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="9"/><path d="m14 10l-4 4m0-4l4 4"/></g></svg>
                            </button>
                        </div>
                        <form>
                            <div class="relative flex justify-center mt-4 md:mt-4 lg:mt-4 xl:mt-5">
                                <div class="flex justify-center w-full h-[24vw] md:h-[14vw] lg:h-[10vw] xl:h-[8vw] rounded-3xl">
                                    <img class="object-cover rounded-[20px] md:rounded-[25px] lg:rounded-[35px]" id="image_user" alt="Usuario">
                                </div>
                            </div>
                            <div class="flex justify-evenly mt-6 mb-3 lg:mb-4">
                                <button type="button" id="confirmDeleteUserBtn" class="place-self-center col-span-6 px-[1vw] text-white bg-[#fe7355] fuente_1 hover:bg-[#ff8268] focus:ring-4 focus:outline-none focus:ring-[#dc6750] rounded-3xl text-base md:text-lg lg:text-lg xl:text-xl py-1.5 md:py-1.5 lg:py-1.5 xl:py-2 w-[30%] text-center">Eliminar</button>
                                <button type="button" onclick="closeModalUsuarioDelete()" class="place-self-center col-span-6 px-[1vw] text-white bg-[#db4900] fuente_1 hover:bg-[#d96328] focus:ring-4 focus:outline-none focus:ring-[#bd5F30] rounded-3xl text-base md:text-lg lg:text-lg xl:text-xl py-1.5 md:py-1.5 lg:py-1.5 xl:py-2 w-[30%] text-center">Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="/js/usuarios.js"></script>
    <script src="/js/imagenPrevia.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>

</body>
</html>